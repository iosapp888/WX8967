<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/x-icon" id="favicon" href="" />
    <meta name="description" id="metaDescription" content="" />
    <title id="pageTitle"></title>
    <meta property="og:title" id="ogTitle" content="" />
    <meta property="og:description" id="ogDescription" content="" />
    <meta property="og:image" id="ogImage" content="" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.bootcss.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet">
    
    <style type="text/tailwindcss">
        @layer utilities {
            .loader {
                @apply animate-spin h-12 w-12 border-2 border-green-500 border-t-transparent rounded-full;
            }
            .fade-in {
                animation: fadeIn 0.5s ease-in-out;
            }
            .expired-x {
                @apply text-red-600 text-6xl md:text-8xl font-black;
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
        }
    </style>
    
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }
        #contentFrame {
            height: 100vh;
            width: 100vw;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .expired-container {
            background: linear-gradient(135deg, #fff 0%, #f9f9f9 100%);
        }
        
        /* æ–°ç‰ˆå¼•å¯¼é¡µé¢æ ·å¼ */
        .guide-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .guide-card {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 400px;
            width: 100%;
        }
        .guide-icon {
            font-size: 80px;
            margin-bottom: 20px;
            color: #667eea;
        }
        .guide-title {
            color: #333;
            margin-bottom: 15px;
            font-size: 24px;
            font-weight: 600;
        }
        .guide-subtitle {
            color: #666;
            margin-bottom: 25px;
            line-height: 1.5;
        }
        .steps {
            text-align: left;
            margin: 25px 0;
            padding: 0 10px;
        }
        .step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            font-size: 16px;
            color: #555;
            line-height: 1.5;
        }
        .step-number {
            background: #667eea;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            margin-right: 12px;
            flex-shrink: 0;
            margin-top: 2px;
        }
        .browser-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 25px 0;
        }
        .browser-icon {
            font-size: 40px;
            color: #667eea;
        }
        .copy-link {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            word-break: break-all;
            font-size: 14px;
            color: #666;
        }
        .copy-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
            transition: background 0.3s;
        }
        .copy-btn:hover {
            background: #5a6fd8;
        }
        .tip {
            color: #999;
            font-size: 14px;
            margin-top: 20px;
            line-height: 1.4;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- åŠ è½½çŠ¶æ€ -->
    <div id="loaderContainer" class="fixed inset-0 flex flex-col justify-center items-center bg-white z-50">
        <div class="loader mb-4"></div>
        <h1 class="text-xl font-semibold text-gray-800">æ­£åœ¨åŠ è½½å†…å®¹...</h1>
        <p id="loadProgress" class="text-gray-500 mt-2 text-sm">å‡†å¤‡è¯·æ±‚èµ„æº</p>
    </div>
    
    <!-- å†…åµŒæ¨¡å¼å®¹å™¨ -->
    <div id="contentContainer" class="hidden fade-in">
        <iframe id="contentFrame" class="border-0 w-full h-full" 
                sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
                title="å†…åµŒç½‘é¡µå†…å®¹"></iframe>
    </div>
    
    <!-- é“¾æ¥è¿‡æœŸé¡µé¢ -->
    <div id="expiredContainer" class="hidden fixed inset-0 flex flex-col justify-center items-center expired-container z-50 p-6 text-center">
        <div class="expired-x mb-6">âœ•</div>
        <h3 class="text-2xl font-bold text-gray-800 mb-3">é“¾æ¥å·²è¿‡æœŸ</h3>
        <p id="expiryDetail" class="text-gray-600 mb-8 max-w-md">è¯¥é“¾æ¥çš„æœ‰æ•ˆæœŸå·²è¿‡ï¼Œæ— æ³•ç»§ç»­è®¿é—®ã€‚è¯·è”ç³»é“¾æ¥æä¾›è€…è·å–æœ€æ–°é“¾æ¥ã€‚</p>
        <button id="closeBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-2 rounded-md transition-colors">
            å…³é—­é¡µé¢
        </button>
    </div>
    
    <!-- äºŒç»´ç è¿‡æœŸé¡µé¢ -->
    <div id="qrExpiredContainer" class="hidden fixed inset-0 flex flex-col justify-center items-center bg-white z-50 p-6 text-center">
        <div class="text-red-500 text-6xl mb-6">âŒ</div>
        <h3 class="text-2xl font-bold text-gray-800 mb-3">äºŒç»´ç å·²è¿‡æœŸ</h3>
        <p class="text-gray-600 mb-6 max-w-md">æ­¤äºŒç»´ç å·²è¶…è¿‡10åˆ†é’Ÿæœ‰æ•ˆæœŸï¼Œè¯·é‡æ–°æ‰«ææœ€æ–°çš„äºŒç»´ç ã€‚</p>
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 max-w-md">
            <p class="text-sm text-yellow-700">
                äºŒç»´ç æ¯10åˆ†é’Ÿè‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡ï¼Œè¯·ç¡®ä¿æ‰«æçš„æ˜¯æœ€æ–°çš„äºŒç»´ç 
            </p>
        </div>
        <button id="closeQrBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-2 rounded-md transition-colors">
            å…³é—­é¡µé¢
        </button>
    </div>
    
    <!-- æ–°ç‰ˆå¼•å¯¼æ¨¡å¼é¡µé¢ -->
    <div id="guideContainer" class="guide-container hidden">
        <div class="guide-card">
            <div class="guide-icon">ğŸ”—</div>
            <h1 class="guide-title">è¯·åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€</h1>
            <p class="guide-subtitle">å½“å‰åº”ç”¨æ— æ³•ç›´æ¥æ‰“å¼€æ­¤é“¾æ¥</p>
            
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div>ç‚¹å‡»å³ä¸Šè§’èœå•æŒ‰é’®</div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div>é€‰æ‹© <strong style="color: #667eea;">"åœ¨æµè§ˆå™¨æ‰“å¼€"</strong></div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div>åœ¨æµè§ˆå™¨ä¸­ç»§ç»­è®¿é—®</div>
                </div>
            </div>
            
            <div class="browser-icons">
                <div class="browser-icon">ğŸŒ</div>
                <div class="browser-icon">ğŸ”</div>
                <div class="browser-icon">âš¡</div>
            </div>
            
            <div class="copy-link" id="copyText">
                é“¾æ¥åŠ è½½ä¸­...
            </div>
            
            <button class="copy-btn" onclick="copyLink()">
                <i class="fa fa-copy"></i> å¤åˆ¶é“¾æ¥
            </button>
            
            <div class="tip">
                å¤åˆ¶é“¾æ¥åï¼Œç²˜è´´åˆ°æ‰‹æœºæµè§ˆå™¨ä¸­è®¿é—®
            </div>
        </div>
    </div>
    
    <!-- é”™è¯¯ä¿¡æ¯é¡µé¢ -->
    <div id="errorContainer" class="hidden fixed inset-0 flex flex-col justify-center items-center bg-white z-50 p-6 text-center">
        <i id="errorIcon" class="fa fa-exclamation-triangle text-yellow-500 text-5xl mb-4"></i>
        <h3 class="text-xl font-semibold text-gray-700 mb-2">è®¿é—®å—é™</h3>
        <p id="errorMessage" class="text-gray-500 mb-6">åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•</p>
        <button id="retryBtn" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-md transition-colors">
            é‡è¯•
        </button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"></script>
    <script>
        // å†…å®¹ä¿¡æ¯å­˜å‚¨
        let currentContent = {
            url: '',
            title: '',
            subtitle: '',
            cover_image: '',
            method: 'embed'
        };
        
        // æ£€æµ‹æ˜¯å¦ä¸ºç‹¬ç«‹æµè§ˆå™¨ç¯å¢ƒï¼ˆéå†…åµŒç¯å¢ƒï¼‰
        function isStandaloneBrowser() {
            // æ£€æŸ¥æ˜¯å¦åœ¨å¾®ä¿¡ã€QQã€å¾®åšç­‰APPå†…åµŒæµè§ˆå™¨ä¸­
            const ua = navigator.userAgent.toLowerCase();
            const inWeChat = ua.indexOf('micromessenger') !== -1;
            const inQQ = ua.indexOf('qq/') !== -1;
            const inWeibo = ua.indexOf('weibo') !== -1;
            const inAlipay = ua.indexOf('alipay') !== -1;
            
            // å¦‚æœæ˜¯è¿™äº›APPçš„å†…åµŒæµè§ˆå™¨ï¼Œåˆ™ä¸æ˜¯ç‹¬ç«‹æµè§ˆå™¨ç¯å¢ƒ
            return !(inWeChat || inQQ || inWeibo || inAlipay);
        }
        
        // 1. æå–å‚æ•°ï¼ˆæ”¯æŒtokenå’Œidï¼‰
        function extractParamsFromUrl() {
            const params = new URLSearchParams(window.location.search);
            let token = params.get('token');
            let id = params.get('id');
            
            // å¦‚æœæ²¡æœ‰tokenï¼Œå°è¯•ä»URLè·¯å¾„ä¸­æå–id
            if (!token && !id) {
                const pathMatch = window.location.href.match(/id=(\d+)|(\d+)(?=\.\w+$)/);
                if (pathMatch) id = pathMatch[1] || pathMatch[2];
            }
            
            return {
                token: token,
                id: id ? parseInt(id, 10) : null
            };
        }
        
        // 2. éªŒè¯tokenæœ‰æ•ˆæ€§
        async function validateToken(token) {
            if (!token) return { valid: false, reason: 'ç¼ºå°‘tokenå‚æ•°' };
            
            try {
                updateLoadProgress('æ­£åœ¨éªŒè¯äºŒç»´ç æœ‰æ•ˆæ€§...');
                
                // è°ƒç”¨APIéªŒè¯token
                const apiUrl = `https://wywfh.com/api.php?action=get_url&token=${encodeURIComponent(token)}`;
                
                // è®¾ç½®è¯·æ±‚è¶…æ—¶ï¼ˆ8ç§’ï¼‰
                const timeoutPromise = new Promise((_, reject) => 
                    setTimeout(() => reject(new Error('éªŒè¯è¶…æ—¶')), 8000)
                );
                
                const response = await Promise.race([fetch(apiUrl), timeoutPromise]);
                const result = await response.json();
                
                if (result.success) {
                    return { 
                        valid: true, 
                        data: result.data,
                        linkId: result.data.id
                    };
                } else {
                    // æ ¹æ®é”™è¯¯æ¶ˆæ¯åˆ¤æ–­æ˜¯å¦æ˜¯tokenè¿‡æœŸ
                    if (result.message.includes('äºŒç»´ç å·²è¿‡æœŸ') || result.message.includes('token')) {
                        return { 
                            valid: false, 
                            reason: 'token_expired',
                            message: result.message
                        };
                    } else {
                        return { 
                            valid: false, 
                            reason: 'other',
                            message: result.message
                        };
                    }
                }
            } catch (error) {
                console.error('TokenéªŒè¯å¤±è´¥:', error);
                return { 
                    valid: false, 
                    reason: 'network_error',
                    message: error.message
                };
            }
        }
        
        // 3. æ›´æ–°é¡µé¢å…ƒæ•°æ®
        function updatePageMetadata(data) {
            const title = data.title || 'å†…å®¹åŠ è½½ä¸­...';
            const desc = data.subtitle || 'æ­£åœ¨åŠ è½½å†…å®¹...';
            document.getElementById('pageTitle').textContent = title;
            document.getElementById('ogTitle').content = title;
            document.getElementById('metaDescription').content = desc;
            document.getElementById('ogDescription').content = desc;
            if (data.cover_image) {
                document.getElementById('ogImage').content = data.cover_image;
                document.getElementById('favicon').href = data.cover_image;
                currentContent.cover_image = data.cover_image;
            }
            currentContent.title = title;
            currentContent.subtitle = desc;
        }
        
        // 4. æ›´æ–°åŠ è½½è¿›åº¦
        function updateLoadProgress(message) {
            document.getElementById('loadProgress').textContent = message;
        }
        
        // 5. å¤„ç†å†…åµŒæ¨¡å¼
        async function handleEmbedMode(url) {
            // å¦‚æœæ˜¯ç‹¬ç«‹æµè§ˆå™¨ç¯å¢ƒï¼Œç›´æ¥è·³è½¬
            if (isStandaloneBrowser()) {
                window.location.href = url;
                return true;
            } else {
                // éç‹¬ç«‹æµè§ˆå™¨ç¯å¢ƒï¼ˆAPPå†…åµŒï¼‰ï¼šä½¿ç”¨iframeå†…åµŒæ˜¾ç¤º
                const contentFrame = document.getElementById('contentFrame');
                const loaderContainer = document.getElementById('loaderContainer');
                const contentContainer = document.getElementById('contentContainer');
                
                return new Promise((resolve, reject) => {
                    // è¶…æ—¶è®¾ç½®ï¼ˆ15ç§’ï¼‰
                    const timeout = setTimeout(() => {
                        reject(new Error('å†…å®¹åŠ è½½è¶…æ—¶'));
                    }, 15000);
                    
                    // åŠ è½½å®Œæˆå›è°ƒ
                    contentFrame.onload = () => {
                        clearTimeout(timeout);
                        loaderContainer.classList.add('hidden');
                        contentContainer.classList.remove('hidden');
                        resolve(true);
                    };
                    
                    // åŠ è½½å¤±è´¥å›è°ƒ
                    contentFrame.onerror = () => {
                        clearTimeout(timeout);
                        reject(new Error('å†…å®¹åŠ è½½å¤±è´¥'));
                    };
                    
                    // è®¾ç½®iframeæº
                    updateLoadProgress('æ­£åœ¨åŠ è½½å†…å®¹...');
                    contentFrame.src = url;
                });
            }
        }
        
        // 6. å¤„ç†å¼•å¯¼æ¨¡å¼ - ç®€åŒ–ç‰ˆ
        function handleRedirectMode(url) {
            // å¦‚æœæ˜¯ç‹¬ç«‹æµè§ˆå™¨ç¯å¢ƒï¼Œç›´æ¥è·³è½¬
            if (isStandaloneBrowser()) {
                window.location.href = url;
                return true;
            }
            
            // æ›´æ–°å¼•å¯¼é¡µé¢çš„é“¾æ¥æ˜¾ç¤º
            document.getElementById('copyText').textContent = url;
            
            // æ˜¾ç¤ºå¼•å¯¼é¡µé¢ï¼Œéšè—åŠ è½½çŠ¶æ€
            const loaderContainer = document.getElementById('loaderContainer');
            const guideContainer = document.getElementById('guideContainer');
            
            loaderContainer.classList.add('hidden');
            guideContainer.classList.remove('hidden');
            
            // å¼•å¯¼æ¨¡å¼åœ¨å†…åµŒæµè§ˆå™¨ä¸­ä¸è‡ªåŠ¨è·³è½¬ï¼Œå›ºå®šæ˜¾ç¤ºå¼•å¯¼é¡µé¢
            return false;
        }
        
        // 7. å¤åˆ¶é“¾æ¥åŠŸèƒ½
        function copyLink() {
            const copyText = document.getElementById("copyText");
            const textArea = document.createElement("textarea");
            textArea.value = copyText.textContent;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand("copy");
            document.body.removeChild(textArea);
            
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fa fa-check"></i> å·²å¤åˆ¶!';
            btn.style.background = "#28a745";
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.style.background = "#667eea";
            }, 2000);
        }
        
        // 8. ä¸»é€»è¾‘ï¼šæ ¹æ®APIè¿”å›çš„æ¨¡å¼å¤„ç†
        async function processContent() {
            const { url, method } = currentContent;
            
            if (method === 'redirect') {
                // å¼•å¯¼æ¨¡å¼
                return handleRedirectMode(url);
            } else {
                // å†…åµŒæ¨¡å¼
                return handleEmbedMode(url);
            }
        }
        
        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            loadContent();
            // é‡è¯•æŒ‰é’®äº‹ä»¶
            document.getElementById('retryBtn').addEventListener('click', loadContent);
            // å…³é—­æŒ‰é’®äº‹ä»¶
            document.getElementById('closeBtn').addEventListener('click', () => {
                if (window.close) {
                    window.close();
                } else {
                    document.getElementById('expiredContainer').classList.add('hidden');
                }
            });
            // äºŒç»´ç è¿‡æœŸå…³é—­æŒ‰é’®
            document.getElementById('closeQrBtn').addEventListener('click', () => {
                if (window.close) {
                    window.close();
                } else {
                    document.getElementById('qrExpiredContainer').classList.add('hidden');
                    window.location.href = 'https://wywfh.com/';
                }
            });
        });
        
        // 9. åŠ è½½å†…å®¹ä¸»å‡½æ•°
        async function loadContent() {
            // åˆå§‹åŒ–DOMå…ƒç´ 
            const loader = document.getElementById('loaderContainer');
            const errorContainer = document.getElementById('errorContainer');
            const expiredContainer = document.getElementById('expiredContainer');
            const qrExpiredContainer = document.getElementById('qrExpiredContainer');
            const guideContainer = document.getElementById('guideContainer');
            const [errorIcon, errorMessage] = [
                document.getElementById('errorIcon'),
                document.getElementById('errorMessage')
            ];
            const expiryDetail = document.getElementById('expiryDetail');
            
            // é‡ç½®æ‰€æœ‰çŠ¶æ€
            loader.classList.remove('hidden');
            [errorContainer, expiredContainer, qrExpiredContainer, guideContainer].forEach(el => el.classList.add('hidden'));
            
            // æå–å‚æ•°
            const { token, id } = extractParamsFromUrl();
            
            // å¦‚æœæ²¡æœ‰tokenä¹Ÿæ²¡æœ‰idï¼Œæ˜¾ç¤ºé”™è¯¯
            if (!token && !id) {
                setTimeout(() => {
                    loader.classList.add('hidden');
                    errorIcon.className = 'fa fa-exclamation-triangle text-yellow-500 text-5xl mb-4';
                    errorMessage.textContent = 'æœªæ‰¾åˆ°æœ‰æ•ˆçš„è®¿é—®å‚æ•°ï¼Œè¯·æ£€æŸ¥é“¾æ¥';
                    errorContainer.classList.remove('hidden');
                }, 500);
                return;
            }
            
            try {
                updateLoadProgress('æ­£åœ¨è¯·æ±‚èµ„æºä¿¡æ¯...');
                
                let result;
                
                // å¦‚æœæœ‰tokenï¼Œå…ˆéªŒè¯token
                if (token) {
                    const tokenValidation = await validateToken(token);
                    
                    if (!tokenValidation.valid) {
                        // tokenæ— æ•ˆæˆ–è¿‡æœŸ
                        if (tokenValidation.reason === 'token_expired') {
                            loader.classList.add('hidden');
                            qrExpiredContainer.classList.remove('hidden');
                            return;
                        } else {
                            throw new Error(tokenValidation.message || 'äºŒç»´ç éªŒè¯å¤±è´¥');
                        }
                    }
                    
                    // tokenéªŒè¯æˆåŠŸï¼Œä½¿ç”¨è¿”å›çš„æ•°æ®
                    result = { success: true, data: tokenValidation.data };
                    updateLoadProgress('äºŒç»´ç éªŒè¯æˆåŠŸï¼Œæ­£åœ¨åŠ è½½å†…å®¹...');
                } else {
                    // ä½¿ç”¨ä¼ ç»Ÿçš„IDæ–¹å¼
                    const apiUrl = `https://wywfh.com/api.php?action=get_url&id=${id}`;
                    
                    // è®¾ç½®è¯·æ±‚è¶…æ—¶ï¼ˆ10ç§’ï¼‰
                    const timeoutPromise = new Promise((_, reject) => 
                        setTimeout(() => reject(new Error('è¿æ¥è¶…æ—¶')), 10000)
                    );
                    const response = await Promise.race([fetch(apiUrl), timeoutPromise]);
                    result = await response.json();
                }
                
                // å¤„ç†APIè¿”å›çš„é”™è¯¯
                if (!result.success) {
                    if (result.message === "è¯¥é“¾æ¥å·²è¿‡æœŸ") {
                        // é“¾æ¥è¿‡æœŸå¤„ç†
                        expiryDetail.textContent = result.data?.expiry_time 
                            ? `è¯¥é“¾æ¥å·²äº ${result.data.expiry_time} è¿‡æœŸ` 
                            : "è¯¥é“¾æ¥å·²è¿‡æœŸï¼Œè¯·è”ç³»æä¾›è€…è·å–æ–°é“¾æ¥";
                        loader.classList.add('hidden');
                        expiredContainer.classList.remove('hidden');
                        return;
                    }
                    // å…¶ä»–é”™è¯¯
                    throw new Error(result.message || 'è¯·æ±‚å¤±è´¥');
                }
                
                // éªŒè¯å†…å®¹é“¾æ¥æ˜¯å¦å­˜åœ¨
                if (!result.data?.original_url) {
                    throw new Error('æœªæ‰¾åˆ°å¯¹åº”çš„å†…å®¹é“¾æ¥');
                }
                
                // å­˜å‚¨å†…å®¹ä¿¡æ¯
                currentContent = {
                    url: result.data.original_url,
                    title: result.data.title || '',
                    subtitle: result.data.subtitle || '',
                    cover_image: result.data.cover_image || '',
                    method: result.data.method || 'embed'
                };
                
                // æ›´æ–°é¡µé¢å…ƒæ•°æ®
                updatePageMetadata(result.data);
                
                // å¤„ç†å†…å®¹å±•ç¤º
                updateLoadProgress(`æ­£åœ¨${currentContent.method === 'embed' ? 'åŠ è½½' : 'å¼•å¯¼'}å†…å®¹...`);
                await processContent();
                
            } catch (error) {
                console.error('åŠ è½½å¤±è´¥:', error);
                loader.classList.add('hidden');
                
                // å¤„ç†å…¶ä»–é”™è¯¯
                const errorText = error.message.includes('è¶…æ—¶') 
                    ? 'æ“ä½œè¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥' 
                    : error.message.includes('æœªæ‰¾åˆ°') 
                        ? `æœªæ‰¾åˆ°å¯¹åº”çš„å†…å®¹` 
                        : `åŠ è½½å¤±è´¥: ${error.message}`;
                
                errorIcon.className = 'fa fa-exclamation-triangle text-yellow-500 text-5xl mb-4';
                errorMessage.textContent = errorText;
                errorContainer.classList.remove('hidden');
            }
        }
    </script>
</body>
</html>
